# 调整夏普比率

Harvey和Liu（2014）提供了一种在多重检验中调整夏普比率的方法。由于进行了多次检验，基于历史回测的夏普比率常常被夸大了。研究人员可能尝试了许多策略，最后选择了具有最大夏普比率的策略。但是这样的策略，其夏普比率并不代表真正的期望收益。经过了大量检验后，选择的策略很有可能只是碰巧获得高收益。考虑到这一点，我们需要调低其夏普比率。如果我们又进行了更多检验，那么调整的幅度就要更大。

以图22-1中的候选交易策略为例，其夏普比率为0.92，对应的_t_统计量为2.91，_p_值为0.4%，因此，如果仅进行一次检验，这样的策略看起来非常有吸引力，因为只有0.4%的可能性是碰巧出现。但是，如果这是经过200次检验所获得的策略，情况就完全不同了。按照Bonferroni检验，我们需要将_p_值阈值调整为0.05/200=0.000 25。因此，至少_t_统计量要达到3.66，我们才能认为该策略在95%的置信度下是真正的发现。我们观测到的_t_统计量为2.91，远低于3.66，因此，我们不考虑这一策略。

我们也可以通过另一种等价的方法来做Bonferroni检验。假设我们想要认定策略有效，其_p_值就必须小于某个预设的阈值，例如5%（或所设定的策略无效的置信度为95%）：

_p_值 < 阈值

Bonferroni检验使用的阈值是原始阈值（0.05）除以检验次数，在我们这里，检验次数等于200：

_p_值 < 0.000 25

等价地，我们可以将单次检验的_p_值乘以200，然后判断其是否小于0.05，即

_p_值×200 < 0.05

在我们的案例中，原始_p_值为0.004，乘以200，得到调整后的_p_值为0.80，相应的_t_统计量为0.25。这一_p_值明显大于阈值0.05。我们可以追问，夏普比率为多少，对应策略的_t_统计量为0.25？答案是0.08。因此，给定进行了200次检验，并且按照Bonferroni检验，我们成功地将原始夏普比率为0.92的候选策略认定为“不显著的”，因为针对多个检验调整后的夏普比率仅为0.08。相应的夏普比率大幅缩减，比例达91%（=（0.92-0.08）/0.92）。

我们再来讨论另外两种方法，由于候选交易策略的_t_统计量在200个策略中是最小的，因此使用Holm检验与Bonferroni检验的调整是一样的。另外，BHY也显著拒绝了这一候选交易策略。

在多次检验中的每一种候选交易策略都被拒绝，这对我们来说是好事，因为这200个策略都是随机生成的。正如之前所讨论的，检验是否适当还取决于检验统计量之间的相关性。在200个策略的例子中不存在这个问题，因为我们没有在随机变量上强加任何相关性。Harvey和Liu（2014）明确考虑了检验之间的相关性，并给出了计算多重检验调整后夏普比率的多种方法。